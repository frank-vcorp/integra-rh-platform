# Dossier de Checkpoint: Integra-RH

**ID del Checkpoint:** 2025-10-26_1730

**Módulo/Componente:** PVM-DATA-01: Export Firestore (clients/posts) — Esqueletos ETL

**Agente Principal:** Codex (Arquitecto)

**Tareas PROYECTO.md Asociadas:** `[>] PVM-DATA-01: Export Firestore (clients/posts)`

---

## 1. Resumen Ejecutivo (Para el Director de Proyecto)

Se preparó el pipeline de datos con scripts TypeScript para: (1) exportar Firestore v1 a JSON, (2) importar a MySQL/TiDB con Drizzle, y (3) verificar conteos. Los scripts no exponen secretos y respetan `.gitignore` para no versionar datos crudos.

---

## 2. Snapshot Técnico (Para Continuidad de IA)

### 2.1. Scripts creados
- `integra-rh-manus/scripts/firestore-export.ts`: Exporta `clients` y `posts` (incluye `id` de Firestore) → `integra-rh-manus/data/exports/*.json`.
- `integra-rh-manus/scripts/etl-import.ts`: Importa `clients` (genera mapa FS→SQL) y `posts` (usa mapa para FK); omite posts sin mapeo válido.
- `integra-rh-manus/scripts/etl-verify.ts`: Compara conteos fuente vs DB.

### 2.2. Integración de NPM scripts
- `integra-rh-manus/package.json`
  - `data:export`, `data:import`, `data:verify` (via tsx)

### 2.3. Seguridad y versionado
- `.gitignore`: añade `integra-rh-manus/data/exports/*.json` (no versionar datos).

---

## 3. Ejecución (paso a paso)
- Pre-requisitos:
  - `GOOGLE_APPLICATION_CREDENTIALS` → ruta a Service Account de Firebase v1
  - `DATABASE_URL` (MySQL/TiDB) configurada (ya usada por Drizzle)
- Exportar Firestore → JSON:
  - `cd integra-rh-manus`
  - `pnpm run data:export`
- Importar JSON → DB:
  - `pnpm run data:import`
- Verificar conteos:
  - `pnpm run data:verify`

---

## 4. Próximos Pasos
- Repetir proceso con datasets reales y validar mapeos de cliente.
- Completar PVM-DATA-02 (ETL) y PVM-DATA-03 (verificación) con datos definitivos.

---

## 5. Tiempo y Notas
- Tiempo invertido: ~35 min
- Nota: para posts sin mapeo de cliente (FS→SQL) se registran como omitidos; esto es esperado cuando el dataset de clientes no está completo.
