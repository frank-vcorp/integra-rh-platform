Dossier de Checkpoint: Integra RH v2

ID del Checkpoint: 2025-11-20_1453

Módulo/Componente: Demo Data + Psicométricas Webhook Flow

Agente Principal: Codex-AI

Tareas PROYECTO.md Asociadas: [>] PVM-DASH-01 (Backend bloques cliente) — datos demo para panel; [>] PVM-DASH-02 (Frontend panel cliente) — dataset para QA.

1. Resumen Ejecutivo (Para el Director de Proyecto)

Objetivo de la Sesión: Sembrar un dataset demo completo (cliente→puesto→candidato→proceso) con resultados psicométricos reales para que Paula pueda mostrar el panel cargado.

Estado al Finalizar: Funcional y listo para QA — script idempotente + registros insertados en Cloud SQL.

2. Snapshot Técnico (Para Continuidad de IA)

2.1. Descripción Funcional

Se añadió un script TS que crea/actualiza un cliente demo “Sycom Demo Corp”, su puesto, un candidato con resultados psicométricos (JSON + PDF) y un proceso ligado con bloques de investigación. Garantiza idempotencia y usa el correo solicitado para disparar notificaciones.

2.2. Checklist de Tareas Técnicas Completadas

[✓] Crear `scripts/seed-demo.ts` con helper `firstRow` y `ensureRecord` para evitar duplicados.
[✓] Sembrar candidato demo con `psicometricos` completos (JSON almacenado, URL de PDF y estatus “Completado”).
[✓] Generar documentos asociados (`PSICOMETRICO_JSON`, `PSICOMETRICO`, CV, dictamen demo) y proceso con bloques laborales/legal/buró/visita.
[✓] Ejecutar `pnpm tsx scripts/seed-demo.ts` contra Cloud SQL (correo `frank.saavedra.marin@gmail.com`).

2.3. Archivos Clave Modificados o Creados

[CREATE]: integra-rh-manus/scripts/seed-demo.ts
[CREATE]: Checkpoints/CHK_2025-11-20_1453.md

3. Arquitectura y Contratos (Para Trabajo en Paralelo)

3.1. Dependencias Nuevas o Críticas

(No se añadieron dependencias.)

3.2. Estructuras de Datos / Modelos / Schemas

// integra-rh-manus/scripts/seed-demo.ts
const psicometricResults = {
  bateria: "Wonderlic Demo",
  puntaje: 78,
  conclusiones: ["Capacidad sobresaliente", "Juicio alto"],
  estatus: "Completado",
  fechaReporte: new Date().toISOString(),
};

3.3. Interfaces y Contratos de API (Si aplica)

(No aplica; se consumen helpers existentes `createClient`, `createCandidate`, etc.)

4. Estado y Próximos Pasos

4.1. Bloqueos y Decisiones Pendientes

Bloqueo: Ninguno.
Decisión Pendiente: Confirmar si se requiere data demo adicional (más procesos/candidatos) para pruebas multi-cliente.

4.2. Contexto para Otros Módulos/Agentes

Para el Agente Frontend: Ya puedes entrar con cualquier admin y ver el cliente “Sycom Demo Corp” con datos completos para el dashboard.
Para el Agente Integraciones: El candidato demo usa el correo `frank.saavedra.marin@gmail.com`, útil para nuevas pruebas de psicométricas.

4.3. Siguientes Pasos para ESTE Módulo

[ ] Validar que el panel cliente consuma correctamente los bloques demo (PVM-DASH-02).
[ ] Ajustar webhook para actualizar estatus automáticamente al recibir nuevas pruebas reales.
[ ] Documentar en PROYECTO.md cómo refrescar/limpiar el dataset demo.
